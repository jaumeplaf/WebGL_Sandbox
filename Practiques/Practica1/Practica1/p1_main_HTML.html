<!DOCTYPE html>
<html>

  <head>
  
    <meta charset="utf-8">
    
    <title> P1 Jaume Pla u1941090</title>
    
    <!-- Link style CSS file -->
    <link rel="stylesheet" href="p1_style.css">

    <!-- Shader definitions -->

    <!-- TODO:
            -Color selector
            -Randomize H/S/V / saturation / contrast / etc.

            -Randomize vertex position (individual scaling) along v(position-origin)
            -Randomize uniform scale using v
            -Random rotation per star (using StarCenter as seed?)

            -Animate stars on idle (small variations on individual scaling)
    -->

    <script id="solidColorVS" 
          type="x-shader/x-vertex">#version 300 es
      
      //Vertex shader

      precision mediump float;

      in vec3 VertexPosition;
      in vec3 StarCenter;
      in float TransitionTime;
      out vec3 vColor;

      
      void main()  {
      
          float t = TransitionTime / 100.0;
          vec3 dir = VertexPosition - StarCenter;
          vec3 scaledPos = dir * t;
          vec3 finalPos = scaledPos + StarCenter;

          //Use 5.0 as a Line marker, to exclude vertex scaling
          if(StarCenter.x == 5.0){
            gl_Position = vec4(VertexPosition, 1.0);
            vColor = (VertexPosition + 1.0) * 0.5; 
          }
          else {
           gl_Position = vec4(finalPos, 1.0);
            vColor = (VertexPosition + 1.0) * 0.5; 
          }
          

      }
    </script>
    <script id="solidColorFS" 
          type="x-shader/x-fragment">#version 300 es

      //Fragment shader
      
      precision mediump float;

      in vec3 vColor;
      out vec4 fragmentColor;
      
      void main() {
        fragmentColor = vec4(vColor, 1.0);

      }
    </script>

  </head>

  <body>

    <canvas id="myCanvas" width="1905" height="840">
      HTML5 not supported
    </canvas>

    <!-- Control buttons -->
    <button id="clearSceneButton">Clear</button>
    <button id="newLineButton">New Line</button>
    

    <!-- Load custom WebGL, utilities and shapes libraries -->
    <script src = "jWebGlLib.js"></script>
    <script src = "jUtilLib.js"></script>
    <script src = "jShapeLib.js"></script>

    <!-- Load main script -->
    <script src = "p1_script.js"></script>

  </body>

</html>
